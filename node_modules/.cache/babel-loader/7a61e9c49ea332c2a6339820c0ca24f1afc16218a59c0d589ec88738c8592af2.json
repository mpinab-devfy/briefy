{"ast":null,"code":"import React,{useState,useEffect}from'react';import{pullRequests}from'../lib/supabase';import{FileText,ArrowLeft,Download,Edit,Save,X,Calendar,User,Loader,Eye,EyeOff}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProjectPR=_ref=>{let{project,prContent,onBack,onSave}=_ref;const[isEditing,setIsEditing]=useState(false);const[editedContent,setEditedContent]=useState(prContent||'');const[projectPR,setProjectPR]=useState(null);const[isLoading,setIsLoading]=useState(true);const[error,setError]=useState(null);const[previewMode,setPreviewMode]=useState('edit');// Função simples para renderizar markdown\nconst renderMarkdown=text=>{const lines=text.split('\\n');const elements=[];let key=0;for(let i=0;i<lines.length;i++){const line=lines[i];// Headers\nif(line.startsWith('# ')){elements.push(/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900 mb-4 mt-6\",children:line.substring(2)},key++));}else if(line.startsWith('## ')){elements.push(/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-gray-800 mb-3 mt-5\",children:line.substring(3)},key++));}else if(line.startsWith('### ')){elements.push(/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-medium text-gray-800 mb-2 mt-4\",children:line.substring(4)},key++));}else if(line.startsWith('#### ')){elements.push(/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-gray-700 mb-2 mt-3\",children:line.substring(5)},key++));}else if(line.startsWith('##### ')){elements.push(/*#__PURE__*/_jsx(\"h5\",{className:\"text-base font-medium text-gray-700 mb-1 mt-2\",children:line.substring(6)},key++));}else if(line.startsWith('###### ')){elements.push(/*#__PURE__*/_jsx(\"h6\",{className:\"text-sm font-medium text-gray-600 mb-1 mt-2\",children:line.substring(7)},key++));}// List items\nelse if(line.startsWith('- ')||line.startsWith('* ')){elements.push(/*#__PURE__*/_jsx(\"li\",{className:\"text-gray-700 mb-1\",children:line.substring(2)},key++));}else if(line.match(/^\\d+\\.\\s/)){const match=line.match(/^\\d+\\.\\s(.*)$/);elements.push(/*#__PURE__*/_jsx(\"li\",{className:\"text-gray-700 mb-1\",children:match?match[1]:line},key++));}// Bold and italic\nelse if(line.includes('**')||line.includes('*')){let processedLine=line;// Bold\nprocessedLine=processedLine.replace(/\\*\\*(.*?)\\*\\*/g,'<strong class=\"font-semibold\">$1</strong>');// Italic\nprocessedLine=processedLine.replace(/\\*(.*?)\\*/g,'<em class=\"italic\">$1</em>');elements.push(/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-700 mb-2\",dangerouslySetInnerHTML:{__html:processedLine}},key++));}// Code blocks (simplified)\nelse if(line.startsWith('```')){// Skip code block markers for now\ncontinue;}// Regular paragraphs\nelse if(line.trim()){elements.push(/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 mb-2 leading-relaxed\",children:line},key++));}// Empty lines\nelse{elements.push(/*#__PURE__*/_jsx(\"br\",{},key++));}}return/*#__PURE__*/_jsx(\"div\",{className:\"space-y-1\",children:elements});};// Buscar documento técnico do projeto do banco de dados\nuseEffect(()=>{const loadProjectPR=async()=>{try{setIsLoading(true);setError(null);const{data,error}=await pullRequests.list(project.id);if(error){console.error('Erro ao carregar documento técnico do projeto:',error);setError('Erro ao carregar documento técnico do projeto: '+error.message);}else{// Pegar o PR mais recente do projeto\nconst latestPR=data&&data.length>0?data[0]:null;setProjectPR(latestPR);if(latestPR){setEditedContent(latestPR.content||prContent||'');}}}catch(err){console.error('Erro ao carregar documento técnico do projeto:',err);setError('Erro ao carregar documento técnico do projeto: '+err.message);}finally{setIsLoading(false);}};loadProjectPR();},[project.id,prContent]);// Conteúdo padrão se não houver PR no banco\nconst defaultPRContent=\"# Documento T\\xE9cnico - \".concat(project.name,\"\\n\\n## 1. Vis\\xE3o Geral\\n\\nEste documento apresenta o resumo t\\xE9cnico detalhado do projeto **\").concat(project.name,\"**.\\n\\n### 1.1 Objetivos\\n- Descrever os objetivos principais do projeto\\n- Definir o escopo de trabalho\\n- Estabelecer crit\\xE9rios de sucesso\\n\\n### 1.2 Contexto\\n- Situa\\xE7\\xE3o atual\\n- Problemas identificados\\n- Oportunidades de melhoria\\n\\n## 2. Arquitetura Proposta\\n\\n### 2.1 Vis\\xE3o Geral da Arquitetura\\n- Diagramas de arquitetura\\n- Padr\\xF5es utilizados\\n- Tecnologias selecionadas\\n\\n### 2.2 Componentes Principais\\n- Frontend: React com TypeScript\\n- Backend: Node.js/Express\\n- Banco de Dados: PostgreSQL\\n- Infraestrutura: AWS/Docker\\n\\n### 2.3 Integra\\xE7\\xF5es\\n- APIs externas\\n- Servi\\xE7os de terceiros\\n- Microsservi\\xE7os\\n\\n## 3. Requisitos T\\xE9cnicos\\n\\n### 3.1 Requisitos Funcionais\\n1. RF001: O sistema deve permitir...\\n2. RF002: O usu\\xE1rio poder\\xE1...\\n\\n### 3.2 Requisitos N\\xE3o Funcionais\\n- RNF001: Performance - tempo de resposta < 2s\\n- RNF002: Seguran\\xE7a - autentica\\xE7\\xE3o OAuth 2.0\\n- RNF003: Disponibilidade - 99.9% uptime\\n\\n### 3.3 Regras de Neg\\xF3cio\\n- RN001: Valida\\xE7\\xF5es espec\\xEDficas\\n- RN002: Fluxos de aprova\\xE7\\xE3o\\n\\n## 4. Estimativa de Esfor\\xE7o\\n\\n### 4.1 Cronograma\\n- Fase 1: Planejamento (2 semanas)\\n- Fase 2: Desenvolvimento (8 semanas)\\n- Fase 3: Testes (2 semanas)\\n- Fase 4: Deploy (1 semana)\\n\\n### 4.2 Recursos Necess\\xE1rios\\n- Equipe de desenvolvimento: 4 desenvolvedores\\n- Designer UI/UX: 1 profissional\\n- QA Tester: 1 profissional\\n- DevOps: 1 profissional\\n\\n### 4.3 Custos Estimados\\n- Desenvolvimento: R$ XX.XXX\\n- Infraestrutura: R$ X.XXX/m\\xEAs\\n- Licen\\xE7as: R$ X.XXX/ano\\n\\n## 5. Riscos Identificados\\n\\n### 5.1 Riscos T\\xE9cnicos\\n- Complexidade da integra\\xE7\\xE3o com sistemas legados\\n- Curva de aprendizado de novas tecnologias\\n\\n### 5.2 Riscos de Neg\\xF3cio\\n- Mudan\\xE7as nos requisitos durante o desenvolvimento\\n- Depend\\xEAncia de equipes externas\\n\\n### 5.3 Plano de Mitiga\\xE7\\xE3o\\n- Estrat\\xE9gias para minimizar impactos\\n- Planos de conting\\xEAncia\\n\\n## 6. Conclus\\xE3o\\n\\nEste documento serve como base para o desenvolvimento do projeto \").concat(project.name,\".\\nTodas as decis\\xF5es t\\xE9cnicas e arquiteturais devem ser validadas com base nos\\nrequisitos e objetivos aqui definidos.\\n\\n---\\n\\n**Data de Cria\\xE7\\xE3o:** \").concat(new Date().toLocaleDateString('pt-BR'),\"\\n**Vers\\xE3o:** 1.0\\n**Status:** Rascunho\\n  \");const currentContent=(projectPR===null||projectPR===void 0?void 0:projectPR.content)||prContent||defaultPRContent;const handleSave=async()=>{try{if(projectPR){// Atualizar PR existente\nconst{error}=await pullRequests.update(projectPR.id,{content:editedContent,title:\"Documento T\\xE9cnico - \".concat(project.name),description:\"Documento t\\xE9cnico detalhado do projeto \".concat(project.name)});if(error){console.error('Erro ao atualizar documento técnico:',error);alert('Erro ao salvar documento técnico: '+error.message);return;}}else{// Criar novo PR\nconst{error}=await pullRequests.create({title:\"Documento T\\xE9cnico - \".concat(project.name),description:\"Documento t\\xE9cnico detalhado do projeto \".concat(project.name),content:editedContent,status:'draft',project_id:project.id});if(error){console.error('Erro ao criar documento técnico:',error);alert('Erro ao salvar documento técnico: '+error.message);return;}}if(onSave){onSave(editedContent);}setIsEditing(false);// Recarregar o PR para atualizar o estado\nconst{data}=await pullRequests.list(project.id);const latestPR=data&&data.length>0?data[0]:null;setProjectPR(latestPR);}catch(err){console.error('Erro ao salvar documento técnico:',err);alert('Erro ao salvar documento técnico: '+err.message);}};const handleCancel=()=>{setEditedContent(currentContent);setIsEditing(false);};const handleDownload=()=>{const blob=new Blob([currentContent],{type:'text/markdown'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=\"PR-\".concat(project.name.replace(/\\s+/g,'_'),\".md\");document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjectURL(url);};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"max-w-full mx-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-[400px]\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(Loader,{className:\"w-6 h-6 animate-spin text-blue-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Carregando documento t\\xE9cnico do projeto...\"})]})})});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-full mx-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:onBack,className:\"flex items-center text-blue-600 hover:text-blue-800 mb-4\",children:[/*#__PURE__*/_jsx(ArrowLeft,{className:\"w-4 h-4 mr-2\"}),\"Voltar para Projetos\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border border-red-200 rounded-lg p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-red-600 mb-2\",children:\"Erro ao carregar documento t\\xE9cnico\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 text-sm\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.reload(),className:\"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700\",children:\"Tentar Novamente\"})]})})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-full mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:onBack,className:\"flex items-center text-blue-600 hover:text-blue-800 mb-4\",children:[/*#__PURE__*/_jsx(ArrowLeft,{className:\"w-4 h-4 mr-2\"}),\"Voltar para Projetos\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-lg p-6 mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mr-4\",children:/*#__PURE__*/_jsx(FileText,{className:\"w-6 h-6 text-blue-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:[\"Documento T\\xE9cnico - \",project.name]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Resumo t\\xE9cnico detalhado do projeto\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleDownload,className:\"flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-4 h-4 mr-2\"}),\"Download\"]}),!isEditing?/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setIsEditing(true),className:\"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\",children:[/*#__PURE__*/_jsx(Edit,{className:\"w-4 h-4 mr-2\"}),\"Editar\"]}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleSave,className:\"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\",children:[/*#__PURE__*/_jsx(Save,{className:\"w-4 h-4 mr-2\"}),\"Salvar\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleCancel,className:\"flex items-center px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors\",children:[/*#__PURE__*/_jsx(X,{className:\"w-4 h-4 mr-2\"}),\"Cancelar\"]})]})]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-lg p-6 mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(User,{className:\"w-4 h-4 mr-2\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Projeto: \",project.name]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-4 h-4 mr-2\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Criado: \",new Date(project.created_at).toLocaleDateString('pt-BR')]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(FileText,{className:\"w-4 h-4 mr-2\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Status: \",projectPR?'Personalizado':'Padrão']})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-lg p-6\",children:isEditing?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-900\",children:\"Editando Documento T\\xE9cnico\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setPreviewMode('edit'),className:\"px-3 py-1 rounded-md text-sm font-medium transition-colors \".concat(previewMode==='edit'?'bg-blue-100 text-blue-700':'bg-gray-100 text-gray-600 hover:bg-gray-200'),children:[/*#__PURE__*/_jsx(Edit,{className:\"w-4 h-4 inline mr-1\"}),\"Editar\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setPreviewMode('preview'),className:\"px-3 py-1 rounded-md text-sm font-medium transition-colors \".concat(previewMode==='preview'?'bg-blue-100 text-blue-700':'bg-gray-100 text-gray-600 hover:bg-gray-200'),children:[/*#__PURE__*/_jsx(Eye,{className:\"w-4 h-4 inline mr-1\"}),\"Preview\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setPreviewMode('split'),className:\"px-3 py-1 rounded-md text-sm font-medium transition-colors \".concat(previewMode==='split'?'bg-blue-100 text-blue-700':'bg-gray-100 text-gray-600 hover:bg-gray-200'),children:[/*#__PURE__*/_jsx(EyeOff,{className:\"w-4 h-4 inline mr-1\"}),\"Dividido\"]})]})]}),previewMode==='edit'&&/*#__PURE__*/_jsx(\"textarea\",{value:editedContent,onChange:e=>setEditedContent(e.target.value),className:\"w-full h-[600px] p-4 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 font-mono text-sm resize-none\",placeholder:\"Digite o conte\\xFAdo do documento t\\xE9cnico em Markdown...\"}),previewMode==='preview'&&/*#__PURE__*/_jsx(\"div\",{className:\"border border-gray-300 rounded-md p-4 bg-gray-50 min-h-[600px] overflow-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"prose prose-lg max-w-none\",children:renderMarkdown(editedContent)})}),previewMode==='split'&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 min-h-[600px]\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-600 mb-2\",children:\"Editor\"}),/*#__PURE__*/_jsx(\"textarea\",{value:editedContent,onChange:e=>setEditedContent(e.target.value),className:\"w-full h-[550px] p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 font-mono text-sm resize-none\",placeholder:\"Digite o conte\\xFAdo do documento t\\xE9cnico em Markdown...\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-600 mb-2\",children:\"Preview\"}),/*#__PURE__*/_jsx(\"div\",{className:\"border border-gray-300 rounded-md p-3 bg-gray-50 h-[550px] overflow-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"prose prose-sm max-w-none\",children:renderMarkdown(editedContent)})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex justify-end space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleCancel,className:\"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors\",children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,className:\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\",children:\"Salvar\"})]})]}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"prose prose-lg max-w-none\",children:renderMarkdown(currentContent)})})}),!isEditing&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 flex justify-center space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onBack,className:\"px-6 py-3 text-gray-600 hover:text-gray-800 font-medium\",children:\"Voltar para Projetos\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsEditing(true),className:\"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\",children:\"Editar Documento\"})]})]});};export default ProjectPR;","map":{"version":3,"names":["React","useState","useEffect","pullRequests","FileText","ArrowLeft","Download","Edit","Save","X","Calendar","User","Loader","Eye","EyeOff","jsx","_jsx","jsxs","_jsxs","ProjectPR","_ref","project","prContent","onBack","onSave","isEditing","setIsEditing","editedContent","setEditedContent","projectPR","setProjectPR","isLoading","setIsLoading","error","setError","previewMode","setPreviewMode","renderMarkdown","text","lines","split","elements","key","i","length","line","startsWith","push","className","children","substring","match","includes","processedLine","replace","dangerouslySetInnerHTML","__html","trim","loadProjectPR","data","list","id","console","message","latestPR","content","err","defaultPRContent","concat","name","Date","toLocaleDateString","currentContent","handleSave","update","title","description","alert","create","status","project_id","handleCancel","handleDownload","blob","Blob","type","url","URL","createObjectURL","a","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","onClick","window","location","reload","created_at","value","onChange","e","target","placeholder"],"sources":["/Users/matheuspina/Desktop/briefy-new/src/components/ProjectPR.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Project, pullRequests } from '../lib/supabase';\nimport {\n  FileText,\n  ArrowLeft,\n  Download,\n  Edit,\n  Save,\n  X,\n  Calendar,\n  User,\n  Loader,\n  Eye,\n  EyeOff\n} from 'lucide-react';\n\ninterface ProjectPRProps {\n  project: Project;\n  prContent?: string;\n  onBack: () => void;\n  onSave?: (content: string) => void;\n}\n\nconst ProjectPR: React.FC<ProjectPRProps> = ({\n  project,\n  prContent,\n  onBack,\n  onSave\n}) => {\n  const [isEditing, setIsEditing] = useState(false);\n  const [editedContent, setEditedContent] = useState(prContent || '');\n  const [projectPR, setProjectPR] = useState<any>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [previewMode, setPreviewMode] = useState<'edit' | 'preview' | 'split'>('edit');\n\n  // Função simples para renderizar markdown\n  const renderMarkdown = (text: string): React.ReactElement => {\n    const lines = text.split('\\n');\n    const elements: React.ReactElement[] = [];\n    let key = 0;\n\n    for (let i = 0; i < lines.length; i++) {\n      const line = lines[i];\n\n      // Headers\n      if (line.startsWith('# ')) {\n        elements.push(<h1 key={key++} className=\"text-3xl font-bold text-gray-900 mb-4 mt-6\">{line.substring(2)}</h1>);\n      } else if (line.startsWith('## ')) {\n        elements.push(<h2 key={key++} className=\"text-2xl font-semibold text-gray-800 mb-3 mt-5\">{line.substring(3)}</h2>);\n      } else if (line.startsWith('### ')) {\n        elements.push(<h3 key={key++} className=\"text-xl font-medium text-gray-800 mb-2 mt-4\">{line.substring(4)}</h3>);\n      } else if (line.startsWith('#### ')) {\n        elements.push(<h4 key={key++} className=\"text-lg font-medium text-gray-700 mb-2 mt-3\">{line.substring(5)}</h4>);\n      } else if (line.startsWith('##### ')) {\n        elements.push(<h5 key={key++} className=\"text-base font-medium text-gray-700 mb-1 mt-2\">{line.substring(6)}</h5>);\n      } else if (line.startsWith('###### ')) {\n        elements.push(<h6 key={key++} className=\"text-sm font-medium text-gray-600 mb-1 mt-2\">{line.substring(7)}</h6>);\n      }\n      // List items\n      else if (line.startsWith('- ') || line.startsWith('* ')) {\n        elements.push(<li key={key++} className=\"text-gray-700 mb-1\">{line.substring(2)}</li>);\n      } else if (line.match(/^\\d+\\.\\s/)) {\n        const match = line.match(/^\\d+\\.\\s(.*)$/);\n        elements.push(<li key={key++} className=\"text-gray-700 mb-1\">{match ? match[1] : line}</li>);\n      }\n      // Bold and italic\n      else if (line.includes('**') || line.includes('*')) {\n        let processedLine = line;\n        // Bold\n        processedLine = processedLine.replace(/\\*\\*(.*?)\\*\\*/g, '<strong class=\"font-semibold\">$1</strong>');\n        // Italic\n        processedLine = processedLine.replace(/\\*(.*?)\\*/g, '<em class=\"italic\">$1</em>');\n        elements.push(<div key={key++} className=\"text-gray-700 mb-2\" dangerouslySetInnerHTML={{ __html: processedLine }} />);\n      }\n      // Code blocks (simplified)\n      else if (line.startsWith('```')) {\n        // Skip code block markers for now\n        continue;\n      }\n      // Regular paragraphs\n      else if (line.trim()) {\n        elements.push(<p key={key++} className=\"text-gray-700 mb-2 leading-relaxed\">{line}</p>);\n      }\n      // Empty lines\n      else {\n        elements.push(<br key={key++} />);\n      }\n    }\n\n    return <div className=\"space-y-1\">{elements}</div>;\n  };\n\n  // Buscar documento técnico do projeto do banco de dados\n  useEffect(() => {\n    const loadProjectPR = async () => {\n      try {\n        setIsLoading(true);\n        setError(null);\n\n        const { data, error } = await pullRequests.list(project.id);\n\n        if (error) {\n          console.error('Erro ao carregar documento técnico do projeto:', error);\n          setError('Erro ao carregar documento técnico do projeto: ' + error.message);\n        } else {\n          // Pegar o PR mais recente do projeto\n          const latestPR = data && data.length > 0 ? data[0] : null;\n          setProjectPR(latestPR);\n          if (latestPR) {\n            setEditedContent(latestPR.content || prContent || '');\n          }\n        }\n      } catch (err: any) {\n        console.error('Erro ao carregar documento técnico do projeto:', err);\n        setError('Erro ao carregar documento técnico do projeto: ' + err.message);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    loadProjectPR();\n  }, [project.id, prContent]);\n\n  // Conteúdo padrão se não houver PR no banco\n  const defaultPRContent = `# Documento Técnico - ${project.name}\n\n## 1. Visão Geral\n\nEste documento apresenta o resumo técnico detalhado do projeto **${project.name}**.\n\n### 1.1 Objetivos\n- Descrever os objetivos principais do projeto\n- Definir o escopo de trabalho\n- Estabelecer critérios de sucesso\n\n### 1.2 Contexto\n- Situação atual\n- Problemas identificados\n- Oportunidades de melhoria\n\n## 2. Arquitetura Proposta\n\n### 2.1 Visão Geral da Arquitetura\n- Diagramas de arquitetura\n- Padrões utilizados\n- Tecnologias selecionadas\n\n### 2.2 Componentes Principais\n- Frontend: React com TypeScript\n- Backend: Node.js/Express\n- Banco de Dados: PostgreSQL\n- Infraestrutura: AWS/Docker\n\n### 2.3 Integrações\n- APIs externas\n- Serviços de terceiros\n- Microsserviços\n\n## 3. Requisitos Técnicos\n\n### 3.1 Requisitos Funcionais\n1. RF001: O sistema deve permitir...\n2. RF002: O usuário poderá...\n\n### 3.2 Requisitos Não Funcionais\n- RNF001: Performance - tempo de resposta < 2s\n- RNF002: Segurança - autenticação OAuth 2.0\n- RNF003: Disponibilidade - 99.9% uptime\n\n### 3.3 Regras de Negócio\n- RN001: Validações específicas\n- RN002: Fluxos de aprovação\n\n## 4. Estimativa de Esforço\n\n### 4.1 Cronograma\n- Fase 1: Planejamento (2 semanas)\n- Fase 2: Desenvolvimento (8 semanas)\n- Fase 3: Testes (2 semanas)\n- Fase 4: Deploy (1 semana)\n\n### 4.2 Recursos Necessários\n- Equipe de desenvolvimento: 4 desenvolvedores\n- Designer UI/UX: 1 profissional\n- QA Tester: 1 profissional\n- DevOps: 1 profissional\n\n### 4.3 Custos Estimados\n- Desenvolvimento: R$ XX.XXX\n- Infraestrutura: R$ X.XXX/mês\n- Licenças: R$ X.XXX/ano\n\n## 5. Riscos Identificados\n\n### 5.1 Riscos Técnicos\n- Complexidade da integração com sistemas legados\n- Curva de aprendizado de novas tecnologias\n\n### 5.2 Riscos de Negócio\n- Mudanças nos requisitos durante o desenvolvimento\n- Dependência de equipes externas\n\n### 5.3 Plano de Mitigação\n- Estratégias para minimizar impactos\n- Planos de contingência\n\n## 6. Conclusão\n\nEste documento serve como base para o desenvolvimento do projeto ${project.name}.\nTodas as decisões técnicas e arquiteturais devem ser validadas com base nos\nrequisitos e objetivos aqui definidos.\n\n---\n\n**Data de Criação:** ${new Date().toLocaleDateString('pt-BR')}\n**Versão:** 1.0\n**Status:** Rascunho\n  `;\n\n  const currentContent = projectPR?.content || prContent || defaultPRContent;\n\n  const handleSave = async () => {\n    try {\n      if (projectPR) {\n        // Atualizar PR existente\n        const { error } = await pullRequests.update(projectPR.id, {\n          content: editedContent,\n          title: `Documento Técnico - ${project.name}`,\n          description: `Documento técnico detalhado do projeto ${project.name}`\n        });\n\n        if (error) {\n          console.error('Erro ao atualizar documento técnico:', error);\n          alert('Erro ao salvar documento técnico: ' + error.message);\n          return;\n        }\n      } else {\n        // Criar novo PR\n        const { error } = await pullRequests.create({\n          title: `Documento Técnico - ${project.name}`,\n          description: `Documento técnico detalhado do projeto ${project.name}`,\n          content: editedContent,\n          status: 'draft',\n          project_id: project.id\n        });\n\n        if (error) {\n          console.error('Erro ao criar documento técnico:', error);\n          alert('Erro ao salvar documento técnico: ' + error.message);\n          return;\n        }\n      }\n\n      if (onSave) {\n        onSave(editedContent);\n      }\n      setIsEditing(false);\n\n      // Recarregar o PR para atualizar o estado\n      const { data } = await pullRequests.list(project.id);\n      const latestPR = data && data.length > 0 ? data[0] : null;\n      setProjectPR(latestPR);\n    } catch (err: any) {\n      console.error('Erro ao salvar documento técnico:', err);\n      alert('Erro ao salvar documento técnico: ' + err.message);\n    }\n  };\n\n  const handleCancel = () => {\n    setEditedContent(currentContent);\n    setIsEditing(false);\n  };\n\n  const handleDownload = () => {\n    const blob = new Blob([currentContent], { type: 'text/markdown' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `PR-${project.name.replace(/\\s+/g, '_')}.md`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"max-w-full mx-auto\">\n        <div className=\"flex items-center justify-center min-h-[400px]\">\n          <div className=\"flex items-center space-x-3\">\n            <Loader className=\"w-6 h-6 animate-spin text-blue-600\" />\n            <span className=\"text-gray-600\">Carregando documento técnico do projeto...</span>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"max-w-full mx-auto\">\n        <div className=\"mb-6\">\n          <button\n            onClick={onBack}\n            className=\"flex items-center text-blue-600 hover:text-blue-800 mb-4\"\n          >\n            <ArrowLeft className=\"w-4 h-4 mr-2\" />\n            Voltar para Projetos\n          </button>\n        </div>\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-6\">\n          <div className=\"text-center\">\n            <div className=\"text-red-600 mb-2\">Erro ao carregar documento técnico</div>\n            <div className=\"text-red-500 text-sm\">{error}</div>\n            <button\n              onClick={() => window.location.reload()}\n              className=\"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700\"\n            >\n              Tentar Novamente\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-full mx-auto\">\n      {/* Header */}\n      <div className=\"mb-6\">\n        <button\n          onClick={onBack}\n          className=\"flex items-center text-blue-600 hover:text-blue-800 mb-4\"\n        >\n          <ArrowLeft className=\"w-4 h-4 mr-2\" />\n          Voltar para Projetos\n        </button>\n\n        <div className=\"bg-white rounded-lg shadow-lg p-6 mb-6\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center\">\n              <div className=\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mr-4\">\n                <FileText className=\"w-6 h-6 text-blue-600\" />\n              </div>\n              <div>\n                <h1 className=\"text-2xl font-bold text-gray-900\">\n                  Documento Técnico - {project.name}\n                </h1>\n                <p className=\"text-gray-600\">\n                  Resumo técnico detalhado do projeto\n                </p>\n              </div>\n            </div>\n\n            <div className=\"flex items-center space-x-3\">\n              <button\n                onClick={handleDownload}\n                className=\"flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors\"\n              >\n                <Download className=\"w-4 h-4 mr-2\" />\n                Download\n              </button>\n\n              {!isEditing ? (\n                <button\n                  onClick={() => setIsEditing(true)}\n                  className=\"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n                >\n                  <Edit className=\"w-4 h-4 mr-2\" />\n                  Editar\n                </button>\n              ) : (\n                <div className=\"flex items-center space-x-2\">\n                  <button\n                    onClick={handleSave}\n                    className=\"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\n                  >\n                    <Save className=\"w-4 h-4 mr-2\" />\n                    Salvar\n                  </button>\n                  <button\n                    onClick={handleCancel}\n                    className=\"flex items-center px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors\"\n                  >\n                    <X className=\"w-4 h-4 mr-2\" />\n                    Cancelar\n                  </button>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Project Info */}\n      <div className=\"bg-white rounded-lg shadow-lg p-6 mb-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600\">\n          <div className=\"flex items-center\">\n            <User className=\"w-4 h-4 mr-2\" />\n            <span>Projeto: {project.name}</span>\n          </div>\n          <div className=\"flex items-center\">\n            <Calendar className=\"w-4 h-4 mr-2\" />\n            <span>Criado: {new Date(project.created_at).toLocaleDateString('pt-BR')}</span>\n          </div>\n          <div className=\"flex items-center\">\n            <FileText className=\"w-4 h-4 mr-2\" />\n            <span>Status: {projectPR ? 'Personalizado' : 'Padrão'}</span>\n          </div>\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"bg-white rounded-lg shadow-lg p-6\">\n        {isEditing ? (\n          <div>\n            <div className=\"flex items-center justify-between mb-4\">\n              <h2 className=\"text-lg font-semibold text-gray-900\">\n                Editando Documento Técnico\n              </h2>\n              <div className=\"flex items-center space-x-2\">\n                <button\n                  onClick={() => setPreviewMode('edit')}\n                  className={`px-3 py-1 rounded-md text-sm font-medium transition-colors ${\n                    previewMode === 'edit'\n                      ? 'bg-blue-100 text-blue-700'\n                      : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n                  }`}\n                >\n                  <Edit className=\"w-4 h-4 inline mr-1\" />\n                  Editar\n                </button>\n                <button\n                  onClick={() => setPreviewMode('preview')}\n                  className={`px-3 py-1 rounded-md text-sm font-medium transition-colors ${\n                    previewMode === 'preview'\n                      ? 'bg-blue-100 text-blue-700'\n                      : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n                  }`}\n                >\n                  <Eye className=\"w-4 h-4 inline mr-1\" />\n                  Preview\n                </button>\n                <button\n                  onClick={() => setPreviewMode('split')}\n                  className={`px-3 py-1 rounded-md text-sm font-medium transition-colors ${\n                    previewMode === 'split'\n                      ? 'bg-blue-100 text-blue-700'\n                      : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n                  }`}\n                >\n                  <EyeOff className=\"w-4 h-4 inline mr-1\" />\n                  Dividido\n                </button>\n              </div>\n            </div>\n\n            {previewMode === 'edit' && (\n              <textarea\n                value={editedContent}\n                onChange={(e) => setEditedContent(e.target.value)}\n                className=\"w-full h-[600px] p-4 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 font-mono text-sm resize-none\"\n                placeholder=\"Digite o conteúdo do documento técnico em Markdown...\"\n              />\n            )}\n\n            {previewMode === 'preview' && (\n              <div className=\"border border-gray-300 rounded-md p-4 bg-gray-50 min-h-[600px] overflow-auto\">\n                <div className=\"prose prose-lg max-w-none\">\n                  {renderMarkdown(editedContent)}\n                </div>\n              </div>\n            )}\n\n            {previewMode === 'split' && (\n              <div className=\"grid grid-cols-2 gap-4 min-h-[600px]\">\n                <div>\n                  <h3 className=\"text-sm font-medium text-gray-600 mb-2\">Editor</h3>\n                  <textarea\n                    value={editedContent}\n                    onChange={(e) => setEditedContent(e.target.value)}\n                    className=\"w-full h-[550px] p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 font-mono text-sm resize-none\"\n                    placeholder=\"Digite o conteúdo do documento técnico em Markdown...\"\n                  />\n                </div>\n                <div>\n                  <h3 className=\"text-sm font-medium text-gray-600 mb-2\">Preview</h3>\n                  <div className=\"border border-gray-300 rounded-md p-3 bg-gray-50 h-[550px] overflow-auto\">\n                    <div className=\"prose prose-sm max-w-none\">\n                      {renderMarkdown(editedContent)}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            <div className=\"mt-4 flex justify-end space-x-2\">\n              <button\n                onClick={handleCancel}\n                className=\"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors\"\n              >\n                Cancelar\n              </button>\n              <button\n                onClick={handleSave}\n                className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\n              >\n                Salvar\n              </button>\n            </div>\n          </div>\n        ) : (\n          <div>\n            <div className=\"prose prose-lg max-w-none\">\n              {renderMarkdown(currentContent)}\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Actions Footer */}\n      {!isEditing && (\n        <div className=\"mt-6 flex justify-center space-x-4\">\n          <button\n            onClick={onBack}\n            className=\"px-6 py-3 text-gray-600 hover:text-gray-800 font-medium\"\n          >\n            Voltar para Projetos\n          </button>\n          <button\n            onClick={() => setIsEditing(true)}\n            className=\"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            Editar Documento\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ProjectPR;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}